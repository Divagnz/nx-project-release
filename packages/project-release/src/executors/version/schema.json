{
  "$schema": "http://json-schema.org/draft-07/schema",
  "title": "Version Executor",
  "description": "Polyglot semantic versioning with conventional commits support for any project type",
  "type": "object",
  "properties": {
    "version": {
      "type": "string",
      "description": "Explicit version to release (overrides automatic detection)"
    },
    "releaseAs": {
      "type": "string",
      "enum": ["major", "minor", "patch", "prerelease"],
      "description": "Type of version bump to perform"
    },
    "preid": {
      "type": "string",
      "description": "Prerelease identifier to use with prerelease version bumps (e.g., 'alpha', 'beta', 'rc'). Results in versions like 1.0.0-alpha.0, 1.0.0-beta.1"
    },
    "firstRelease": {
      "type": "boolean",
      "default": false,
      "description": "Interactive first release setup. Checks for existing git tags, prompts for initial version, and creates version file if needed. Respects versionFiles and versionPath configuration from nx.json or project.json."
    },
    "dryRun": {
      "type": "boolean",
      "default": false,
      "description": "Preview changes without making modifications"
    },
    "preview": {
      "type": "boolean",
      "default": false,
      "description": "Preview detailed information about what would change (version analysis, files affected, git operations)"
    },
    "gitCommit": {
      "type": "boolean",
      "default": false,
      "description": "Create a git commit with the version changes"
    },
    "gitCommitMessage": {
      "type": "string",
      "description": "Custom git commit message. Supports {version}, {projectName}, {releaseGroupName} placeholders. Default: 'chore(release): {projectName} version {version}'"
    },
    "gitCommitArgs": {
      "type": "string",
      "description": "Additional arguments to pass to the git commit command (e.g., '--no-verify')"
    },
    "gitTag": {
      "type": "boolean",
      "default": false,
      "description": "Create a git tag for the release"
    },
    "gitTagMessage": {
      "type": "string",
      "description": "Custom git tag message. Supports {version}, {projectName}, {releaseGroupName}, {tag} placeholders. Default: tag name"
    },
    "gitTagArgs": {
      "type": "string",
      "description": "Additional arguments to pass to the git tag command"
    },
    "ciOnly": {
      "type": "boolean",
      "default": true,
      "description": "Only allow git operations (commit, tag, push, GitHub release) in CI/CD environments. Checks for CI environment variables (CI, GITHUB_ACTIONS, GITLAB_CI, etc.). Set to false to allow local releases."
    },
    "gitPush": {
      "type": "boolean",
      "default": false,
      "description": "Push commits and tags to the remote repository"
    },
    "gitPushArgs": {
      "type": "string",
      "description": "Additional arguments to pass to the git push command"
    },
    "gitRemote": {
      "type": "string",
      "default": "origin",
      "description": "Git remote to push to"
    },
    "githubRelease": {
      "type": "boolean",
      "default": false,
      "description": "Create a GitHub release for the tag"
    },
    "githubReleaseNotes": {
      "type": "string",
      "description": "Custom release notes for GitHub release. Supports {version}, {projectName}, {tag} placeholders. If not provided, uses generated changelog."
    },
    "githubReleaseDraft": {
      "type": "boolean",
      "default": false,
      "description": "Create the GitHub release as a draft"
    },
    "githubReleasePrerelease": {
      "type": "boolean",
      "default": false,
      "description": "Mark the GitHub release as a prerelease"
    },
    "createReleaseBranch": {
      "type": "boolean",
      "default": false,
      "description": "Create a release branch from current branch and push version bump commit there (e.g., release/v1.0.0)"
    },
    "releaseBranchName": {
      "type": "string",
      "description": "Custom release branch name. Supports {version}, {projectName}, {tag} placeholders. Default: 'release/v{version}'"
    },
    "createPR": {
      "type": "boolean",
      "default": false,
      "description": "Automatically create a pull request for the release branch using GitHub CLI (requires 'gh' to be installed and authenticated)"
    },
    "prTitle": {
      "type": "string",
      "description": "Custom PR title. Supports {version}, {projectName}, {tag} placeholders. Default: 'chore(release): {projectName} v{version}'"
    },
    "prBody": {
      "type": "string",
      "description": "Custom PR body. Supports {version}, {projectName}, {tag}, {changelog} placeholders. Default: generated from changelog"
    },
    "prBaseBranch": {
      "type": "string",
      "description": "Base branch to target for PR. Default: main branch detected from git"
    },
    "prDraft": {
      "type": "boolean",
      "default": false,
      "description": "Create the PR as a draft"
    },
    "prLabels": {
      "type": "string",
      "description": "Comma-separated list of labels to add to the PR (e.g., 'release,automated')"
    },
    "mergeAfterRelease": {
      "type": "boolean",
      "default": false,
      "description": "Automatically merge version bumps and changelog to target branches after successful release. Keeps version numbers synchronized across branches (e.g., release on main â†’ merge to develop)"
    },
    "mergeToBranches": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "List of branches to merge version bump and changelog to (e.g., ['develop', 'staging']). Syncs release metadata across branches. Only applies when mergeAfterRelease is true"
    },
    "mergeStrategy": {
      "type": "string",
      "enum": ["merge", "squash", "rebase"],
      "default": "merge",
      "description": "Git merge strategy to use when merging to target branches"
    },
    "stageChanges": {
      "type": "boolean",
      "description": "Stage changes without committing. If not set, files are staged automatically when gitCommit is true"
    },
    "skipCommit": {
      "type": "boolean",
      "default": false,
      "description": "DEPRECATED: Use gitCommit instead. Skip creating git commit"
    },
    "skipTag": {
      "type": "boolean",
      "default": false,
      "description": "DEPRECATED: Use gitTag instead. Skip creating git tag"
    },
    "versionFile": {
      "type": "string",
      "description": "File containing version information",
      "default": "project.json"
    },
    "versionFiles": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Fallback version files (tried in order)"
    },
    "versionPath": {
      "type": "string",
      "description": "JSON path to version field",
      "default": "version"
    },
    "tagNaming": {
      "type": "object",
      "properties": {
        "prefix": {
          "type": "string",
          "description": "Tag prefix"
        },
        "suffix": {
          "type": "string",
          "description": "Tag suffix"
        },
        "format": {
          "type": "string",
          "description": "Tag format string",
          "default": "{prefix}{version}{suffix}"
        },
        "includeProjectName": {
          "type": "boolean",
          "description": "Include project name in tag",
          "default": true
        }
      }
    },
    "trackDeps": {
      "type": "boolean",
      "default": false,
      "description": "Track workspace dependencies and automatically version dependent projects when their dependencies change"
    },
    "syncVersions": {
      "type": "boolean",
      "default": false,
      "description": "Synchronize versions across multiple projects in the workspace"
    },
    "syncProjects": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Specific projects to synchronize versions with (if not specified, syncs with all projects when syncVersions is true)"
    },
    "syncStrategy": {
      "type": "string",
      "enum": ["highest", "bump"],
      "default": "bump",
      "description": "Strategy for sync versioning: 'highest' uses the highest existing version, 'bump' calculates new version from the main project"
    },
    "postTargets": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "List of targets to execute after successful versioning (e.g., ['build', 'test', 'changelog'])"
    },
    "postTargetOptions": {
      "type": "object",
      "description": "Options to pass to post-targets. Use {version} placeholder to inject the new version",
      "additionalProperties": true
    },
    "releaseGroup": {
      "type": "string",
      "description": "Release group name to use for this project. Release groups allow different versioning strategies and configurations for different sets of projects."
    },
    "projectsRelationship": {
      "type": "string",
      "enum": ["independent", "fixed"],
      "description": "How projects in this release group should be versioned: 'independent' (each project has its own version) or 'fixed' (all projects share the same version)"
    },
    "skipLockFileUpdate": {
      "type": "boolean",
      "default": false,
      "description": "Skip updating lock files (package-lock.json, yarn.lock, pnpm-lock.yaml) after version changes. By default, lock files are automatically updated if they exist."
    },
    "updateLockFile": {
      "type": "boolean",
      "default": true,
      "description": "Explicitly control whether to update lock files. Set to false to skip lock file updates (same as skipLockFileUpdate). By default, lock files are automatically updated if they exist."
    },
    "currentVersionResolver": {
      "type": "string",
      "enum": ["disk", "git-tag", "registry"],
      "default": "disk",
      "description": "Strategy for resolving current version: 'disk' (read from version files), 'git-tag' (find latest git tag), 'registry' (query package registry)"
    },
    "fallbackCurrentVersionResolver": {
      "type": "string",
      "enum": ["disk", "git-tag", "registry"],
      "description": "Fallback strategy if primary resolver fails. Common combinations: git-tag with disk fallback, registry with git-tag fallback"
    }
  }
}